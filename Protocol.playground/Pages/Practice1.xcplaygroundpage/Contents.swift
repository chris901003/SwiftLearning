//ã€ChaoCodeã€‘ Swift ä¸­ç´šç¯‡ 7ï¼šProtocol å¯¦ä½œä½œæ¥­ A
// âœ¨ è«‹é–±è®€å®Œæ•´ä»½å…§å®¹ï¼Œäº†è§£ä½¿ç”¨æƒ…å¢ƒå¾Œï¼Œè·Ÿè‘—ä»¥ä¸‹æ­¥é©Ÿè¨­è¨ˆä¸€å€‹èƒ½ç®¡ç†å…©ç¨®éšŠä¼çš„ protocolã€‚
// 1ï¸âƒ£ è«‹è¨­è¨ˆä¸€å€‹åç‚ºã€Œæœ‰å„ªå…ˆéšŠä¼ã€çš„ protocolã€‚
// ï¼Š conforms to é€™å€‹ protocol çš„è³‡æ–™æœƒæœ‰å…©ç¨®éšŠä¼ï¼Œä¸€ç¨®æ˜¯å„ªå…ˆéšŠä¼ã€å¦ä¸€ç¨®æ˜¯ä¸€èˆ¬éšŠä¼ï¼Œä¸¦ä¸”çŸ¥é“è¦å¦‚ä½•åˆ¤æ–·ä»€éº¼æ¨£çš„è³‡æ–™èƒ½é€²å„ªå…ˆéšŠä¼ã€‚
// ï¼Š é€™å€‹ protocol æœƒæä¾›å…©ç¨®æ–¹æ³•ï¼š
//      1. ç¬¬ä¸€ç¨®æ˜¯ã€Œaddã€ï¼Œå®ƒæœƒæ¥æ”¶ã€Œä¸€å€‹éšŠä¼å…§å®¹çš„åƒæ•¸ã€ï¼Œä¸¦æŠŠä»–æ–°å¢åˆ°åˆé©çš„éšŠä¼ä¸­ã€‚
//      2. ç¬¬äºŒç¨®æ˜¯ã€Œnextã€ï¼Œå®ƒä¸éœ€è¦ä»»ä½•åƒæ•¸ï¼Œæœƒå›å‚³ä¸€å€‹ optional çš„éšŠä¼å…§å®¹ã€‚å‡å¦‚å…©å€‹éšŠä¼éƒ½æ˜¯ç©ºçš„å°±å›å‚³ nilã€‚å¦‚æœå„ªå…ˆéšŠä¼æœ‰äººï¼Œå°±å›å‚³å„ªå…ˆéšŠä¼çš„ç¬¬ä¸€ä½ï¼Œå¦å‰‡å›å‚³ä¸€èˆ¬éšŠä¼çš„ç¬¬ä¸€ä½ã€‚å›å‚³ä¹‹å‰è¨˜å¾—åˆªé™¤éšŠåˆ—å…§çš„è³‡æ–™ä¸¦ä¸”å°å‡ºä¸‹ä¸€ä½çš„è³‡è¨Šã€‚

protocol æœ‰å„ªå…ˆéšŠä¼ {
    // ğŸ‘‡ é€™æ˜¯åŸ·è¡Œã€Œnextã€çš„æ™‚å€™æ‡‰å°å‡ºçš„å…§å®¹
    associatedtype æ’éšŠå…§å®¹
    var ä¸€èˆ¬éšŠä¼: [æ’éšŠå…§å®¹] {get set}
    var å„ªå…ˆéšŠä¼: [æ’éšŠå…§å®¹] {get set}
    static func å„ªå…ˆåˆ¤æ–·(_: æ’éšŠå…§å®¹) -> Bool
}

extension æœ‰å„ªå…ˆéšŠä¼ {
    mutating func add(_ å…§å®¹: æ’éšŠå…§å®¹) {
        switch Self.å„ªå…ˆåˆ¤æ–·(å…§å®¹) {
            case true:
                å„ªå…ˆéšŠä¼.append(å…§å®¹)
            case false:
                ä¸€èˆ¬éšŠä¼.append(å…§å®¹)
        }
    }
    
    mutating func next() -> æ’éšŠå…§å®¹? {
        if let next = å„ªå…ˆéšŠä¼.first {
            print(">> ä¸‹ä¸€ä½æ˜¯å„ªå…ˆéšŠä¼çš„\(next)")
            return å„ªå…ˆéšŠä¼.removeFirst()
        }
        if let next = ä¸€èˆ¬éšŠä¼.first {
            print(">> ä¸‹ä¸€ä½æ˜¯ä¸€èˆ¬éšŠä¼çš„\(next)")
            return ä¸€èˆ¬éšŠä¼.removeFirst()
        }
        print("ç›®å‰æ²’æœ‰ä¸‹ä¸€ä½äº†")
        return nil
    }
}



// âœ‹ è«‹å‹¿ä¿®æ”¹ç©å®¶å’Œç—…æ‚£é€™å…©å€‹é¡å‹ã€‚
struct ç©å®¶: CustomStringConvertible {
    var åå­—: String
    var æœ‰å¿«é€Ÿé€šé—œ: Bool
    var description: String { åå­— }
}

struct ç—…äºº: CustomStringConvertible {
    var åå­—: String
    var æ˜¯æ€¥è¨º: Bool
    var description: String { åå­— }
}

// 2ï¸âƒ£ è«‹å®Œæˆä»¥ä¸‹é€™å…©å€‹ structï¼Œè®“ä»–å€‘èƒ½ conforms to ä½ è¨­è¨ˆçš„ã€Œæœ‰å„ªå…ˆéšŠä¼ã€ã€‚
// ï¼Š éŠæ¨‚è¨­æ–½ä¸­çš„æ’éšŠå…§å®¹æœƒæ˜¯ç©å®¶ï¼Œæœ‰å¿«é€Ÿé€šé—œçš„å¯ä»¥é€²åˆ°å„ªå…ˆéšŠä¼ï¼›è¨ºæ‰€çš„æ’éšŠå…§å®¹æœƒæ˜¯ç—…äººï¼Œæ˜¯æ€¥è¨ºçš„æœƒé€²åˆ°å„ªå…ˆéšŠä¼ã€‚
// ï¼Š è«‹ç¢ºä¿å®ƒå€‘éƒ½å¯ä»¥ä¸è¼¸å…¥ä»»ä½•åƒæ•¸å•Ÿå‹•ï¼ˆä¸è¼¸å…¥å•Ÿå‹•æ™‚éšŠä¼éƒ½æœƒæ˜¯ç©ºçš„ï¼‰ã€‚
struct éŠæ¨‚è¨­æ–½: æœ‰å„ªå…ˆéšŠä¼ {
    var ä¸€èˆ¬éšŠä¼: [ç©å®¶] = []
    var å„ªå…ˆéšŠä¼: [ç©å®¶] = []
    static func å„ªå…ˆåˆ¤æ–·(_ ç©å®¶: ç©å®¶) -> Bool {
        ç©å®¶.æœ‰å¿«é€Ÿé€šé—œ
    }
}

struct è¨ºæ‰€: æœ‰å„ªå…ˆéšŠä¼ {
    var ä¸€èˆ¬éšŠä¼: [ç—…äºº] = []
    var å„ªå…ˆéšŠä¼: [ç—…äºº] = []
    static func å„ªå…ˆåˆ¤æ–·(_ ç—…äºº: ç—…äºº) -> Bool {
        ç—…äºº.æ˜¯æ€¥è¨º
    }
}


// 3ï¸âƒ£ ä¸‹é¢æ˜¯æ¸¬è©¦ï¼Œè«‹å‹¿ä¿®æ”¹ã€‚
var å¤§æ€’ç¥ = éŠæ¨‚è¨­æ–½()
var allPlayer: [ç©å®¶] = [.init(åå­—: "ç´„ç¿°", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "é¦¬å¯", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "äºå¦®", æœ‰å¿«é€Ÿé€šé—œ: true), .init(åå­—: "è‰¾é€£", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "ç±³å¡è", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "é˜¿çˆ¾æ•", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "èŠç´", æœ‰å¿«é€Ÿé€šé—œ: true), .init(åå­—: "æŸ¯å°¼", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "èå¤", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "è²çˆ¾æ‰˜ç‰¹", æœ‰å¿«é€Ÿé€šé—œ: true), .init(åå­—: "æ³•è˜­èŒ²", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "æ¼¢å¨œ", æœ‰å¿«é€Ÿé€šé—œ: false), .init(åå­—: "å°¤ç±³çˆ¾", æœ‰å¿«é€Ÿé€šé—œ: true), .init(åå­—: "å¸Œæ–¯ç‰¹è‰äº", æœ‰å¿«é€Ÿé€šé—œ: true)]

print("ğŸ¢ éŠæ¨‚åœ’æ¸¬è©¦...")
while !allPlayer.isEmpty {
    let nextGroup = allPlayer.prefix(2)
    nextGroup.forEach { _ in å¤§æ€’ç¥.add(allPlayer.removeFirst()) }
    
    å¤§æ€’ç¥.next()
}

var çš®è†šç§‘ = è¨ºæ‰€()
var allPatients: [ç—…äºº] = [.init(åå­—: "è‰¾ç¶­", æ˜¯æ€¥è¨º: true),.init(åå­—: "èŠæ‹‰", æ˜¯æ€¥è¨º: false),.init(åå­—: "æ³°å‹’", æ˜¯æ€¥è¨º: false),.init(åå­—: "æ ¼é›·æ£®", æ˜¯æ€¥è¨º: false),.init(åå­—: "è‰¾ç™»", æ˜¯æ€¥è¨º: false),.init(åå­—: "å®‰å¨œ", æ˜¯æ€¥è¨º: false),.init(åå­—: "é‡‘æ–¯é “", æ˜¯æ€¥è¨º: false),.init(åå­—: "åŸƒè‰è«¾", æ˜¯æ€¥è¨º: false),.init(åå­—: "è‰¾è‰", æ˜¯æ€¥è¨º: true),.init(åå­—: "é˜¿è²çˆ¾", æ˜¯æ€¥è¨º: false),.init(åå­—: "äºç‘Ÿ", æ˜¯æ€¥è¨º: true)]

print("ğŸ¥ çœ‹è¨ºæ¸¬è©¦...")
while !allPatients.isEmpty {
    let nextGroup = allPatients.prefix(2)
    nextGroup.forEach { _ in çš®è†šç§‘.add(allPatients.removeFirst()) }
    
    çš®è†šç§‘.next()
}
